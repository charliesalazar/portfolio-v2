(() => {
  const caseStudies = {
    earthview: {
      title: "Transforming Network Data into Interactive 3D Insights",
      intro:
        "A smartboard concept that makes global network performance easier to interpret, faster to act on, and more collaborative to use.",
      sections: [
        {
          heading: "About Catchpoint",
          body:
            "Catchpoint provides enterprise-grade digital experience monitoring solutions, helping IT teams optimize web performance, diagnose issues, and ensure seamless end-user experiences.",
        },
        {
          heading: "Design Challenge",
          body:
            "Design a new smartboard to visualize real-time network performance in a way that’s easy to understand and act on. The goal was to give IT teams a more intuitive way to monitor global activity, surface key metrics, and make faster decisions.",
          image: {
            src: "assets/case-earthview/hero.png",
            alt: "Earthview smartboard overview",
          },
        },
        {
          heading: "Users",
          body:
            "IT Administrators managing network performance. Network Engineers diagnosing real-time connectivity issues.",
        },
        {
          heading: "My Role",
          body: "Senior Product Designer. UX Researcher. Facilitator.",
        },
        {
          heading: "Ideation",
          body:
            "Developed wireframes and low-fidelity prototypes to explore solutions. Presented concepts to stakeholders, iterating based on their feedback.",
        },
        {
          heading: "Deliverables",
          body:
            "Prototypes: Developed high-fidelity prototypes in Figma with clear annotations for interaction patterns and functionality. Testing & Refinement: Conducted usability testing with end-users to evaluate and refine the prototype. Incorporated feedback to optimize interactions, improve clarity, and enhance overall usability.",
        },
        {
          heading: "Developer Handoff",
          body:
            "Ensured seamless collaboration with developers by providing detailed design specs and interaction documentation in Figma. Conducted regular check-ins during the development phase to address questions and ensure the final implementation aligned with the design vision. Created a design system with reusable components to streamline future iterations and updates.",
        },
        {
          heading: "Solution",
          body:
            "The Earthview Smartboard features a 3D globe that allows users to visualize global network performance in real time. Key features include: interactive zoom and data clustering for faster insights, a simplified visual hierarchy to highlight critical metrics, and seamless integration with Catchpoint’s broader ecosystem.",
          image: {
            src: "assets/case-earthview/solution.png",
            alt: "Earthview smartboard solution details",
          },
        },
        {
          heading: "Outcome",
          body:
            "Reduction in time spent analyzing performance data by nearly 30%. As part of Catchpoint’s Symphony UI Feature Suite, IT adoption increased 43 points to 86% in less than a year. Positive feedback from stakeholders for improving both usability and visual appeal.",
          image: {
            src: "assets/case-earthview/insight.png",
            alt: "Earthview insight visuals",
          },
        },
        {
          heading: "Reflection",
          body:
            "This project reinforced the importance of competitive analysis in designing standout solutions and the value of collaboration during developer handoff. By bridging design and engineering, we delivered a product that improved user workflows and enhanced Catchpoint’s market presence.",
        },
      ],
    },
    endpoint: {
      title: "Improving IT Workflows with Better Monitoring",
      intro:
        "A redesign of the Endpoint Smartboard to reduce cognitive load and help IT teams identify issues faster.",
      sections: [
        {
          heading: "About Catchpoint",
          body:
            "Catchpoint Systems is a digital experience monitoring company that helps enterprises optimize performance across complex networks and applications. Their platform supports proactive performance management for globally distributed teams.",
        },
        {
          heading: "Design Challenge",
          body:
            "IT teams relied on the Endpoint Smartboard to troubleshoot remote network issues, but the original version stacked chart after chart into one long, scrolling page and lacked clarity. Our challenge was to redesign the experience so users could quickly correlate key metrics and identify root causes, without frustration or guesswork.",
          image: {
            src: "assets/case-endpoint/hero.png",
            alt: "Endpoint Smartboard overview",
          },
        },
        {
          heading: "Users",
          body:
            "IT Administrators managing remote workforce performance. Network Support Engineers conducting endpoint diagnostics.",
        },
        {
          heading: "My Role",
          body: "Product Designer. UX Researcher. Design Systems Contributor.",
        },
        {
          heading: "User Research & Findings",
          body:
            "Complex Navigation: Users had to navigate through multiple charts to access key information, slowing down workflows. Lack of Customization: Users wanted dashboards tailored to their roles. Inconsistent Visual Design: Variations in UI elements created a disjointed experience.",
        },
        {
          heading: "Workshop",
          body:
            "Stickies and notes from an ideation workshop where ideas to simplify the smartboard took shape.",
        },
        {
          heading: "Ideation",
          body:
            "Wireframes: Developed low-fidelity wireframes to map user flows and iterate quickly. Mockups: Early concepts of the Endpoint Smartboard.",
        },
        {
          heading: "Deliverables",
          body:
            "Developed high-fidelity prototypes in Figma with clear annotations for interaction patterns and functionality. As a result of user interviews and the ideation workshop, we learned that aligning all charts in a single column helps network engineers visually correlate simultaneous issues for faster diagnosis.",
        },
        {
          heading: "Events & Issues Sidebar",
          body:
            "A new sidebar surfaces real-time alerts like VPN slowness, Wi‑Fi changes, and app load issues without requiring users to dig through metrics.",
          image: {
            src: "assets/case-endpoint/sidebar.png",
            alt: "Events and Issues sidebar highlighting alerts",
          },
        },
        {
          heading: "Visual Markers",
          body:
            "Added visual markers to each network category. A red outline shows where to focus, removing guesswork and scaling clarity across the platform as part of the design system.",
        },
        {
          heading: "Prototyping & Testing",
          body:
            "Created interactive prototypes to show expandable panels and conducted usability testing with end users, using feedback to refine interactions and improve clarity.",
        },
        {
          heading: "Redesigned Smartboard",
          body:
            "Customizable dashboards tailored to specific roles. Simplified navigation for faster access to critical data. Enhanced data visualizations with a clear, actionable hierarchy. A cohesive interface aligned with Catchpoint’s branding.",
          image: {
            src: "assets/case-endpoint/dashboard.png",
            alt: "Redesigned endpoint dashboard layout",
          },
        },
        {
          heading: "Outcome",
          body:
            "Increased adoption among IT teams, with positive feedback highlighting improved usability and efficiency. Stakeholders praised the design for its clarity, flexibility, and alignment with user needs.",
        },
        {
          heading: "Reflection",
          body:
            "This project emphasized the critical role of user research in driving impactful design solutions. By leveraging direct feedback and iterative collaboration, we delivered a tool that exceeded user and business expectations.",
        },
      ],
    },
    solarwinds: {
      title: "Improving the platform experience for SolarWinds users",
      intro:
        "A platform modernization focused on navigation clarity, scalable templates, and a durable design system.",
      sections: [
        {
          heading: "About Slide UX",
          body:
            "Slide UX is a boutique user experience consultancy that helps companies create more usable, engaging digital products. For this project, we partnered with SolarWinds, a leader in IT management solutions, to redesign their digital platform and build a new design system to modernize the user experience across devices.",
        },
        {
          heading: "Scope",
          body:
            "SolarWinds needed a major upgrade to its digital platform. We redesigned navigation, modernized key product pages, and established a scalable design system for desktop, tablet, and mobile. Our approach combined UX audits, competitive research, journey mapping, audience research, and collaboration with marketing and product teams.",
          image: {
            src: "assets/case-solarwinds/hero.jpg",
            alt: "SolarWinds platform redesign overview",
          },
        },
        {
          heading: "Team",
          body:
            "Stakeholders: SolarWinds and Slide UX product managers, marketing leads. Contributors: Slide UX designers, researchers, and developers. End users: IT professionals, network administrators, and enterprise clients.",
        },
        {
          heading: "My Role",
          body:
            "Worked alongside a product manager and another designer. Led navigation redesign, collaborated on wireframes and layouts, and contributed to strategic alignment and research synthesis. Helped shape the design system and mobile experience through regular feedback sessions.",
        },
        {
          heading: "Competitive Research & Strategy",
          body:
            "Benchmarked competitors and identified opportunities like sticky navigation, ungated demos, strategic CTAs, better security messaging, and storytelling through animated screenshots. Used these findings to refine navigation, visual language, and content architecture.",
        },
        {
          heading: "Wireframes & Collaboration",
          body:
            "Created and iterated on wireframes for homepage and Level 2–4 pages. Proposed a capability-first navigation structure to reduce brand-name confusion, and mapped user journeys based on key actions like finding solutions and verifying credibility.",
          image: {
            src: "assets/case-solarwinds/navigation.png",
            alt: "Navigation and wireframe exploration",
          },
        },
        {
          heading: "High-Fidelity Mockups",
          body:
            "Delivered polished designs for homepage, product listings, solutions pages, and mobile-first templates. Aligned navigation and storytelling flows with best practices observed in competitor research.",
          image: {
            src: "assets/case-solarwinds/templates.png",
            alt: "High-fidelity templates and page designs",
          },
        },
        {
          heading: "Design System",
          body:
            "Built a scalable system supporting 8 languages and multiple properties. Standardized UI elements and refined visual storytelling with better use of screenshots, animations, and interactive demos.",
        },
        {
          heading: "Developer Handoff",
          body:
            "Delivered annotated Figma files organized around templates, component libraries, and mobile adaptations. Provided clear specifications to ensure smooth development and scalability.",
        },
        {
          heading: "Before & After",
          body:
            "Switched to a capability-first structure with clearer organization. Emphasized demos, credibility signals, and real user needs throughout templates. Reimagined mobile layouts and closed gaps against leading competitors while leaning into SolarWinds’ strengths.",
        },
        {
          heading: "Key Highlights",
          body:
            "Navigation redesign and user flow mapping were rooted in audience and competitor research. We aligned storytelling, layout, and interaction patterns with both user needs and business goals, future‑proofing SolarWinds’ platform to adapt and grow.",
        },
        {
          heading: "Reflection",
          body:
            "This project showed the power of combining UX audits, competitive research, user interviews, and collaborative iteration. By deeply understanding user needs and market gaps, we helped SolarWinds create a modern, intuitive platform experience built to evolve.",
        },
      ],
    },
    transcat: {
      title: "Modernizing eCommerce workflows for industrial buyers",
      intro:
        "A full eCommerce overhaul to improve discoverability, navigation, and long‑term scalability.",
      sections: [
        {
          heading: "About Slide UX",
          body:
            "Slide UX is a boutique user experience consultancy that helps companies create more usable, engaging digital products. For this project, we partnered with Transcat, a provider of calibration and measurement equipment, to redesign their eCommerce platforms and improve the experience for industrial and laboratory customers.",
        },
        {
          heading: "Design Challenge",
          body:
            "Transcat wanted to upgrade Transcat.com and Pipettes.com to make them easier to navigate, use, and find through search. We set out to modernize the experience, organize content more clearly, and streamline how people get what they need.",
          image: {
            src: "assets/case-transcat/hero.jpg",
            alt: "Transcat ecommerce redesign overview",
          },
        },
        {
          heading: "Team",
          body:
            "Stakeholders: product and engineering leads. Contributors: developers and marketing leads. End users: engineers, procurement pros, lab managers, and small business owners.",
        },
        {
          heading: "My Role",
          body:
            "Joined mid‑project to focus on wireframes, ideation, the design system, and usability testing. Translated early concepts into detailed design work, then refined through testing and iteration.",
        },
        {
          heading: "Wireframes & Collaboration",
          body:
            "Explored layouts and refined ideas in real time. Designed foundational screens in Figma, including homepage, PDPs, and category pages, testing multiple layout options to see what resonated.",
        },
        {
          heading: "High-Fidelity Mockups",
          body:
            "Created high-fidelity mockups for product pages, brand detail pages, and cart interactions. Redesigned navigation to support easier browsing across categories, brands, and device types.",
          image: {
            src: "assets/case-transcat/pdp.png",
            alt: "Product detail page and cart mockups",
          },
        },
        {
          heading: "Design System",
          body:
            "Co-built a reusable, scalable design system in Figma. Created components for cards, buttons, navigation, breadcrumbs, and more, documenting patterns to support devs and ensure consistency.",
          image: {
            src: "assets/case-transcat/navigation.png",
            alt: "Navigation and category browsing patterns",
          },
        },
        {
          heading: "Usability Testing & Iteration",
          body:
            "Conducted usability tests to validate flows, hierarchy, and labeling. Insights informed component refinements and layout updates, with close collaboration to ensure accurate implementation.",
        },
        {
          heading: "Developer Handoff",
          body:
            "Delivered design specs and redlines with behavior notes and CSS guidance. Provided in-context explanations to reduce guesswork and stayed involved post-handoff to ensure polish and fidelity.",
        },
        {
          heading: "Before & After",
          body:
            "Easier navigation, a scalable design system, and improved SEO alignment. Implementation is still underway; Slide UX delivered all final assets as part of the redesign effort.",
        },
        {
          heading: "Key Highlights",
          body:
            "The redesign was grounded in real user feedback. The new experience works for first‑time visitors and longtime customers. The project reinforced the value of collaboration across teams and timelines.",
        },
      ],
    },
  };

  const modal = document.querySelector("#case-modal");
  const modalPanel = modal ? modal.querySelector(".case-modal-panel") : null;
  const modalBody = modal ? modal.querySelector(".case-modal-body") : null;
  const closeButton = modal ? modal.querySelector(".case-modal-close") : null;
  const lightbox = document.querySelector("#lightbox");
  const lightboxImage = lightbox ? lightbox.querySelector("#lightbox-image") : null;
  const lightboxClose = lightbox ? lightbox.querySelector(".lightbox-close") : null;
  let lastFocused = null;
  let lastFocusedLightbox = null;

  const renderCase = (key) => {
    const data = caseStudies[key];
    if (!data || !modalBody) return;
    modalBody.innerHTML = `
      <div class="case-lede">
        <h1 class="case-title">${data.title}</h1>
        <p class="case-intro">${data.intro}</p>
      </div>
      ${data.sections
        .map(
          (section) => `
            <section class="case-section">
              <div class="case-section-text">
                <h3>${section.heading}</h3>
                <p>${section.body}</p>
              </div>
              ${
                section.image
                  ? `
                    <figure class="case-media">
                      <img src="${section.image.src}" alt="${section.image.alt}">
                    </figure>
                  `
                  : ""
              }
            </section>
          `
        )
        .join("")}
    `;
  };

  const openModal = (key) => {
    if (!modal) return;
    renderCase(key);
    lastFocused = document.activeElement;
    modal.classList.add("is-open");
    modal.removeAttribute("hidden");
    modal.setAttribute("aria-hidden", "false");
    document.body.classList.add("modal-open");
    if (closeButton) closeButton.focus();
    if (location.hash !== `#case-${key}`) {
      history.pushState(null, "", `#case-${key}`);
    }
  };

  const closeModal = () => {
    if (!modal) return;
    modal.classList.remove("is-open");
    modal.setAttribute("hidden", "");
    modal.setAttribute("aria-hidden", "true");
    document.body.classList.remove("modal-open");
    if (location.hash.startsWith("#case-")) {
      history.pushState("", document.title, window.location.pathname + window.location.search);
    }
    if (lastFocused && lastFocused.focus) lastFocused.focus();
  };

  const openLightbox = (src, alt) => {
    if (!lightbox || !lightboxImage) return;
    lastFocusedLightbox = document.activeElement;
    lightboxImage.src = src;
    lightboxImage.alt = alt || "";
    lightbox.classList.add("is-open");
    lightbox.removeAttribute("hidden");
    lightbox.setAttribute("aria-hidden", "false");
    if (lightboxClose) lightboxClose.focus();
  };

  const closeLightbox = () => {
    if (!lightbox) return;
    lightbox.classList.remove("is-open");
    lightbox.setAttribute("hidden", "");
    lightbox.setAttribute("aria-hidden", "true");
    if (lightboxImage) {
      lightboxImage.src = "";
      lightboxImage.alt = "";
    }
    if (lastFocusedLightbox && lastFocusedLightbox.focus) lastFocusedLightbox.focus();
  };

  const handleKeydown = (event) => {
    if (lightbox && lightbox.classList.contains("is-open")) {
      if (event.key === "Escape") {
        event.preventDefault();
        closeLightbox();
      }
      return;
    }
    if (!modal || !modal.classList.contains("is-open")) return;
    if (event.key === "Escape") {
      event.preventDefault();
      closeModal();
      return;
    }
    if (event.key === "Tab" && modalPanel) {
      const focusable = modalPanel.querySelectorAll(
        "a[href], button, textarea, input, select, [tabindex]:not([tabindex='-1'])"
      );
      if (!focusable.length) return;
      const first = focusable[0];
      const last = focusable[focusable.length - 1];
      if (event.shiftKey && document.activeElement === first) {
        event.preventDefault();
        last.focus();
      } else if (!event.shiftKey && document.activeElement === last) {
        event.preventDefault();
        first.focus();
      }
    }
  };

  if (modal) {
    modal.addEventListener("click", (event) => {
      const target = event.target;
      if (target && target.closest("[data-close=\"true\"]")) closeModal();
    });
    if (closeButton) closeButton.addEventListener("click", closeModal);
    document.addEventListener("keydown", handleKeydown);
  }

  if (lightbox) {
    lightbox.addEventListener("click", (event) => {
      const target = event.target;
      if (target && target.closest("[data-lightbox-close=\"true\"]")) closeLightbox();
    });
    if (lightboxClose) lightboxClose.addEventListener("click", closeLightbox);
  }

  document.querySelectorAll(".work-link[data-case]").forEach((link) => {
    link.addEventListener("click", (event) => {
      event.preventDefault();
      const key = link.getAttribute("data-case");
      if (key) openModal(key);
    });
  });

  if (modalBody) {
    modalBody.addEventListener("click", (event) => {
      const target = event.target;
      if (!(target instanceof HTMLElement)) return;
      if (target.tagName.toLowerCase() === "img" && target.closest(".case-media")) {
        openLightbox(target.currentSrc || target.src, target.alt);
      }
    });
  }

  const openFromHash = () => {
    if (!location.hash.startsWith("#case-")) return;
    const key = location.hash.replace("#case-", "");
    if (caseStudies[key]) openModal(key);
  };

  window.addEventListener("popstate", () => {
    if (location.hash.startsWith("#case-")) {
      openFromHash();
    } else if (modal && modal.classList.contains("is-open")) {
      closeModal();
    }
  });

  openFromHash();

  const cursor = document.querySelector(".cursor");
  if (cursor) {
    const moveCursor = (event) => {
      const { clientX, clientY } = event;
      cursor.style.left = `${clientX}px`;
      cursor.style.top = `${clientY}px`;
    };

    const showCursor = () => cursor.classList.add("is-active");
    const hideCursor = () => cursor.classList.remove("is-active");

    const setLinkState = (event) => {
      const target = event.target.closest(
        "a, button, [role=\"button\"], input, textarea, select"
      );
      const isLink = Boolean(target);
      const isFooter = target && target.closest(".site-footer");
      cursor.classList.toggle("is-link", isLink);
      cursor.classList.toggle("is-footer", Boolean(isFooter));
    };

    window.addEventListener("mousemove", moveCursor, { passive: true });
    window.addEventListener("mousemove", showCursor, { passive: true });
    window.addEventListener("mouseleave", hideCursor);
    window.addEventListener("mouseover", setLinkState);
  }

  // Intent: respect reduced-motion preferences and skip animation if GSAP isn't loaded.
  const prefersReduced =
    window.matchMedia &&
    window.matchMedia("(prefers-reduced-motion: reduce)").matches;

  if (prefersReduced || typeof gsap === "undefined") {
    return;
  }

  // Intent: enable ScrollTrigger for scroll-based reveals.
  gsap.registerPlugin(ScrollTrigger);

  // Intent: hero intro sequence to set tone without heavy motion.
  const heroTl = gsap.timeline({ defaults: { ease: "power3.out" } });

  heroTl
    .from(".name-line", {
      yPercent: 40,
      opacity: 0,
      duration: 1,
      stagger: 0.08,
    })
    .from(
      ".nickname",
      { y: 12, opacity: 0, duration: 0.5 },
      "-=0.5"
    )
    .from(
      ".tagline",
      { y: 18, opacity: 0, duration: 0.7 },
      "-=0.35"
    )
    .from(
      ".rule",
      { scaleX: 0, transformOrigin: "left center", duration: 0.6 },
      "-=0.5"
    );

  // Intent: staggered reveal for each work card on scroll.
  gsap.utils.toArray(".work-item").forEach((item) => {
    gsap.from(item, {
      y: 28,
      opacity: 0,
      duration: 0.8,
      ease: "power3.out",
      scrollTrigger: {
        trigger: item,
        start: "top 80%",
        toggleActions: "play none none reverse",
      },
    });
  });

  // Intent: gentle reveal for the about portrait.
  gsap.from(".about-photo", {
    y: 40,
    opacity: 0,
    duration: 1,
    ease: "power3.out",
    scrollTrigger: {
      trigger: ".about-bleed",
      start: "top 75%",
      toggleActions: "play none none reverse",
    },
  });

  // Intent: bring in about text after image.
  gsap.from(".about-layout p", {
    y: 20,
    opacity: 0,
    duration: 0.8,
    ease: "power3.out",
    scrollTrigger: {
      trigger: ".about-layout",
      start: "top 80%",
      toggleActions: "play none none reverse",
    },
  });

  // Intent: subtle footer heading reveal to close the page.
  gsap.from(".footer-heading", {
    y: 16,
    opacity: 0,
    duration: 0.6,
    ease: "power3.out",
    scrollTrigger: {
      trigger: ".site-footer",
      start: "top 85%",
      toggleActions: "play none none reverse",
    },
  });
})();
